/* Global Theme & Reset */
:root {
  /* Common Variables */
  --accent-color: #007acc;
  --font-main: 'Segoe UI', sans-serif;
  --font-mono: 'Consolas', 'Courier New', monospace;

  /* Chrome fixed colors */
  --chrome-bg: #202124;
  --chrome-tab: #35363a;
  --chrome-active: #202124;
  --chrome-address: #292a2d;

  /* Dark Theme Default */
  --bg-editor: #1e1e1e;
  --bg-sidebar: #181818;
  --bg-activity-bar: #333333;
  --bg-status-bar: #007acc;
  --bg-title-bar: #323233;
  --bg-tabs: #252526;
  --bg-tab-active: #1e1e1e;
  --bg-tab-inactive: #2d2d2d;
  --fg-default: #cccccc;
  --fg-sidebar: #bbbbbb;
  --fg-active: #ffffff;
  --border-color: #2b2b2b;
}

/* Light Theme Overrides */
.light-theme {
  --bg-editor: #f3f3f3;
  --bg-sidebar: #f3f3f3;
  --bg-activity-bar: #f3f3f3;
  --bg-status-bar: #007acc;
  --bg-title-bar: #dddddd;
  --bg-tabs: #ececec;
  --bg-tab-active: #ffffff;
  --bg-tab-inactive: #ececec;
  --fg-default: #3b3b3b;
  --fg-sidebar: #616161;
  --fg-active: #000000;
  --border-color: #e5e5e5;
}

.ide-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  background-color: var(--bg-editor);
  font-family: var(--font-main);
  color: var(--fg-default);
}

/* Base SVG Reset for IDE */
svg {
  flex-shrink: 0;
}

.title-bar {
  height: 30px;
  background-color: var(--bg-title-bar);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 10px;
  font-size: 11px;
  color: #999;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;

  .menu-items {
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 10;
    .vscode-logo { width: 16px; height: 16px; margin-right: 4px; }
    span { cursor: pointer; &:hover { color: #fff; } }
  }

  .window-controls {
    display: flex;
    .theme-toggle {
      width: 45px; height: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer;
      svg { width: 14px; height: 14px; color: #ffca28; }
    }
    .control-btn {
      width: 45px; height: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer;
      svg { width: 12px; height: 12px; color: currentColor; }
      &:hover { background: rgba(255, 255, 255, 0.1); }
      &.close:hover { background: #e81123; color: white; }
    }
  }
}

.main-body {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* Activity Bar */
.activity-bar {
  width: 48px;
  background-color: var(--bg-activity-bar);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  border-right: 1px solid var(--border-color);
  flex-shrink: 0;

  .action-item {
    height: 48px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    color: var(--fg-sidebar);
    &:hover { color: var(--fg-active); }
    &.active {
      color: var(--fg-active);
      border-left: 2px solid var(--accent-color);
    }
    svg { width: 24px; height: 24px; }

    /* Settings Submenu Style (VS Code like) */
    position: relative;
    .settings-menu {
      position: absolute;
      bottom: 0;
      left: 50px;
      width: 220px;
      background: rgba(37, 37, 38, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      border-radius: 4px;
      padding: 5px 0;
      z-index: 1000;
      animation: menuFadeIn 0.15s ease-out;

      .menu-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 12px;
        color: var(--fg-sidebar);
        font-size: 12px;
        transition: all 0.1s;
        cursor: pointer;

        svg {
          width: 14px;
          height: 14px;
          opacity: 0.7;
        }

        &:hover {
          background-color: var(--accent-color);
          color: white;
          svg { opacity: 1; }
        }
      }
    }
  }
}

@keyframes menuFadeIn {
  from { opacity: 0; transform: translateX(-10px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Workspace Configuration */
.workspace-area {
  flex: 1;
  display: flex;
  position: relative;
  overflow: hidden;
}

/* Tabs for Master View Toggling */
.preview-tabs-bar {
  height: 35px;
  background-color: var(--bg-tabs);
  display: flex;
  border-bottom: 1px solid var(--border-color);
  z-index: 20;
  width: 100%;

  .tab {
    height: 100%;
    min-width: 130px;
    display: flex;
    align-items: center;
    padding: 0 15px;
    background-color: var(--bg-tab-inactive);
    color: var(--fg-sidebar);
    font-size: 13px;
    gap: 8px;
    cursor: pointer;
    border-right: 1px solid var(--border-color);
    user-select: none;

    &.active {
      background-color: var(--bg-tab-active);
      color: var(--fg-active);
      border-top: 1px solid var(--accent-color);
    }

    svg { width: 14px; height: 14px; color: var(--accent-color); }
    
    .tab-file-icon {
      width: 16px;
      height: 16px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      display: inline-block;
      flex-shrink: 0;
    }
  }
}

/* Pane Logic */
.code-zone {
  position: absolute;
  top: 35px;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 10;
  background-color: var(--bg-editor);
  display: flex;
  flex-direction: column;

  .ide-container.preview-focused & {
    display: none !important;
  }
}

.preview-shell {
  flex: 1;
  display: flex;
  flex-direction: column;
  background-color: var(--bg-editor);
  min-width: 0;

  .preview-workspace {
    flex: 1;
    display: flex;
    padding: 0; /* REMOVED PADDING */
    background-color: #080808;
    overflow: hidden;

    .ide-container:not(.preview-focused) & {
      display: none !important;
    }
  }
}

.editor-shell { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.editor-content { flex: 1; overflow: auto; padding: 20px; }
.breadcrumb { height: 22px; display: flex; align-items: center; padding: 0 16px; font-size: 11px; color: rgba(255,255,255,0.4); }

/* Chrome Browser Frame */
.chrome-browser {
  flex: 1;
  background-color: var(--chrome-bg);
  border-radius: 0; /* FLUSH WITH EDGES */
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  border: none;

  .chrome-header {
    background-color: #2b2c2f;
    .chrome-tabs { display: none; } /* HIDDEN AS REQUESTED */

    .chrome-nav {
      height: 32px; /* MORE COMPACT */
      display: flex; 
      align-items: center; 
      padding: 0 10px; 
      gap: 12px; 
      background-color: #35363a; /* USE THE GRAYER BLACK FOR THE BAR */
      border-bottom: 1px solid rgba(255,255,255,0.05);
      
      .nav-btns { 
        display: flex; 
        gap: 12px; 
        svg { width: 14px; height: 14px; color: #fff; } 
      }
      
      .address-bar {
        flex: 1; 
        height: 24px; 
        background-color: #202124; 
        border-radius: 12px;
        display: flex; 
        align-items: center; 
        justify-content: space-between; 
        padding: 0 12px; 
        font-size: 11px;
        
        .address-info { 
          display: flex; 
          align-items: center; 
          gap: 8px; 
          svg.lock { width: 10px; height: 10px; color: #81c784; } 
        }
        
        .address-actions svg { 
          width: 13px; 
          height: 13px; 
          opacity: 0.5; 
          margin-left: 8px; 
        }
      }
      
      .chrome-utils { 
        display: flex; 
        align-items: center; 
        gap: 12px; 
        svg { width: 14px; height: 14px; } 
        .user-avatar { 
          width: 22px; 
          height: 22px; 
          background: #8e24aa; 
          border-radius: 50%; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          font-size: 11px; 
          font-weight: bold; 
        } 
      }
    }
  }

  .browser-body {
    flex: 1; position: relative; overflow: hidden;
    background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a0a 100%);
  }
}

.preview-slider { 
  display: flex; 
  flex-direction: column;
  width: 100%; 
  height: 100%; 
  transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); 
}

.preview-section-wrapper { 
  min-height: 100%; 
  width: 100%;
  overflow-y: auto; 
  padding: 40px; 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  position: relative; 
}

/* Terminal */
.terminal {
  height: 150px; background-color: rgba(24, 24, 24, 0.8); backdrop-filter: blur(12px); border-top: 1px solid var(--border-color);
  display: flex; flex-direction: column; position: absolute; bottom: 0; left: 0; right: 0; z-index: 100; transition: transform 0.3s ease;
  &.minimized { transform: translateY(calc(100% - 35px)); }
  .terminal-tabs {
    height: 35px; display: flex; padding: 0 16px; align-items: center; justify-content: space-between;
    .terminal-tab-group { display: flex; gap: 15px; }
    .terminal-tab { font-size: 11px; color: #888; cursor: pointer; &.active { color: #fff; border-bottom: 2px solid var(--accent-color); } }
    .terminal-actions .terminal-btn { background: none; border: none; color: #888; cursor: pointer; svg { width: 14px; height: 14px; } &:hover { color: #fff; } }
  }
  .terminal-content { flex: 1; padding: 10px; font-family: var(--font-mono); font-size: 12px; overflow-y: auto; .terminal-line { margin-bottom: 2px; } .success { color: #81c784; } .info { color: #64b5f6; } }
}

/* Status Bar */
.status-bar {
  height: 22px; background-color: var(--bg-status-bar); display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: #fff; flex-shrink: 0;
  .status-left, .status-right { display: flex; align-items: center; height: 100%; }
  .status-item { padding: 0 10px; display: flex; align-items: center; height: 100%; cursor: pointer; &:hover { background: rgba(255,255,255,0.1); } svg { width: 14px; height: 14px; margin-right: 5px; } }
}



/* Auth Edit Button */
.preview-section-wrapper .edit-overlay-btn {
  position: absolute; top: 20px; right: 20px; z-index: 60; background: var(--accent-color); color: #fff; border: none; padding: 6px 14px; border-radius: 4px; cursor: pointer; font-size: 12px; opacity: 0; transition: opacity 0.2s;
}
.preview-section-wrapper:hover .edit-overlay-btn, .ide-container.has-auth .edit-overlay-btn { opacity: 1; }

/* Responsive */
@media (max-width: 768px) {
  .desktop-only { display: none !important; }
  .chrome-header { display: none !important; }
  .preview-section-wrapper { padding: 20px; }
  .preview-tabs-bar .tab { flex: 1; justify-content: center; }
  .activity-bar { width: 0; display: none; }
  .sidebar-hidden app-sidebar { display: none; }
}
